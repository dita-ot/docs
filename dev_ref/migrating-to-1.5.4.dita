<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<!--  This file is part of the DITA Open Toolkit project. See the accompanying LICENSE file for applicable license.  -->

<reference id="ID" rev="1.5.4">

  <title>Migrating to release 1.5.4</title>

  <shortdesc>DITA-OT 1.5.4 adds new extension points to configure behavior based on file extensions, declare print
    transformation types and add mappings to the PDF configuration catalog file. PDF output supports mirrored page
    layout and uses new font family definitions. Support for several new languages was added for PDF and XHTML
    output.</shortdesc>

  <refbody>
    <section id="section_vc5_gld_g2">
      <title>Configuration properties file changes</title>
      <p>In previous versions, the <filepath>lib/configuration.properties</filepath> file was generated by the
        integration process. Integration has been changed to generate
          <filepath>lib/org.dita.dost.platform/plugin.properties</filepath> and the role of the old
          <filepath>lib/configuration.properties</filepath> has been changed to contain defaults and configuration
        options, such as default language.</p>
      <p>The <codeph>dita.plugin.org.dita.*.dir</codeph> properties have been changed to point to the DITA-OT base
        directory.</p>
      <p>To allow access to configuration files, the <filepath>lib</filepath> directory needs to be added to the Java
        classpath.</p>
    </section>
    <section>
      <title>New plug-in extension points </title>
      <p>New plug-in extension points have been added allow configuring DITA-OT behavior based on file extensions.</p>
      <simpletable id="simpletable_xym_ryi_uc">
        <sthead>
          <stentry>Extension point</stentry>
          <stentry>Description</stentry>
          <stentry>Default values</stentry>
        </sthead>
        <strow>
          <stentry><parmname>dita.topic.extension</parmname></stentry>
          <stentry>DITA topic</stentry>
          <stentry><filepath>.dita</filepath>, <filepath>.xml</filepath></stentry>
        </strow>
        <strow>
          <stentry><parmname>dita.map.extensions</parmname></stentry>
          <stentry>DITA map</stentry>
          <stentry><filepath>.ditamap</filepath></stentry>
        </strow>
        <strow>
          <stentry><parmname>dita.html.extensions</parmname></stentry>
          <stentry>HTML file</stentry>
          <stentry><filepath>.html</filepath>, <filepath>.htm</filepath></stentry>
        </strow>
        <strow>
          <stentry><parmname>dita.resource.extensions</parmname></stentry>
          <stentry>Resource file</stentry>
          <stentry><filepath>.pdf</filepath>, <filepath>.swf</filepath></stentry>
        </strow>
      </simpletable>
      <p>Both HTML and resource file extensions are used to determine if a file in source is copied to output.</p>
      <p>A new plug-in extension point has been added to declare transformation types as print types.</p>
      <simpletable id="simpletable_xts_5wq_rt">
        <sthead>
          <stentry>Extension point</stentry>
          <stentry>Description</stentry>
        </sthead>
        <strow>
          <stentry><parmname>dita.transtype.print</parmname></stentry>
          <stentry>Declare transformation type as a print type.</stentry>
        </strow>
      </simpletable>
      <p>The <codeph>print_transtypes</codeph> property in <filepath>integrator.properties</filepath> has been
        deprecated in favor of <parmname>dita.transtype.print</parmname>.</p>
    </section>
    <section>
      <title>Plugin URI scheme</title>
      <p>Support for the <keyword>plugin</keyword> URI scheme has been added to XSLT stylesheets. Plug-ins can refer to
        files in other plug-ins without hard-coding relative paths, for example: </p>
      <codeblock xml:space="preserve">&lt;xsl:import href="plugin:org.dita.pdf2:xsl/fo/topic2fo_1.0.xsl"/&gt;</codeblock>
    </section>
    <section>
      <title>XHTML</title>
      <p>Support for the following languages has been added:</p>
      <ul>
        <li>Indonesian</li>
        <li>Kazakh</li>
        <li>Malay</li>
      </ul>
    </section>
    <section>
      <title>PDF</title>
      <p>Support for mirrored page layout was added. The default is the unmirrored layout. The following XSLT
        configuration variables have been deprecated:</p>
      <ul id="ul_hkv_oyj_bd">
        <li><codeph>page-margin-left</codeph></li>
        <li><codeph>page-margin-right</codeph></li>
      </ul>
      <p>The following variables should be used instead to control page margins:</p>
      <ul id="ul_yda_wyj_bd">
        <li><codeph>page-margin-outside</codeph></li>
        <li><codeph>page-margin-inside</codeph></li>
      </ul>
      <p>The <parmname>args.bookmap-order</parmname> property has been added to control how front and back matter are
        processed in bookmaps. The default is to reorder the frontmatter content as in previous releases.</p>
      <p>A new extension point has been added to add mappings to the PDF configuration catalog file.</p>
      <simpletable id="simpletable_jkf_bxq_rt">
        <sthead>
          <stentry>Extension point</stentry>
          <stentry>Description</stentry>
        </sthead>
        <strow>
          <stentry><parmname>org.dita.pdf2.catalog.relative</parmname></stentry>
          <stentry>Configuration catalog includes.</stentry>
        </strow>
      </simpletable>
      <p>Support for the following languages has been added:</p>
      <ul>
        <li>Finnish</li>
        <li>Hebrew</li>
        <li>Romanian</li>
        <li>Russian</li>
        <li>Swedish</li>
      </ul>
      <p>PDF processing no longer copies images or generates XSL FO to output directory. Instead, the temporary
        directory is used for all temporary files and source images are read directly from source directory. The legacy
        processing model can be enabled by setting <parmname>org.dita.pdf2.use-out-temp</parmname> to
          <option>true</option> in configuration properties; support for the legacy processing model may be removed in
        future releases.</p>
      <p>Support for FrameMaker index syntax has been disabled by default. To enable FrameMaker index syntax, set
          <parmname>org.dita.pdf2.index.frame-markup</parmname> to <option>true</option> in configuration
        properties.</p>
      <p>A configuration option has been added to disable internationalization (I18N) font processing and use
        stylesheet-defined fonts. To disable I18N font processing, set <parmname>org.dita.pdf2.i18n.enabled</parmname>
        to <codeph>false</codeph> in configuration properties.</p>
      <p>The XSLT parameters <parmname>customizationDir</parmname> and <parmname>fileProfilePrefix</parmname> have been
        removed in favor of the <parmname>customizationDir.url</parmname> parameter.</p>
      <p>A new shell stylesheet has been added for FOP and other shell stylesheets have also been revised. Plug-ins
        which have their own shell stylesheets for PDF processing should make sure all required stylesheets are
        imported.</p>
      <p>Font family definitions in stylesheets have been changed from Sans, Serif, and Monospaced to sans-serif, serif,
        and monospace, respectively. The I18N font processing still uses the old logical names and aliases are used to
        map the new names to old ones. </p>
    </section>
  </refbody>
</reference>
