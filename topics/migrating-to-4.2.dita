<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE reference PUBLIC "-//OASIS//DTD DITA Reference//EN" "reference.dtd">
<!--  This file is part of the DITA Open Toolkit project. See the accompanying LICENSE file for applicable license.  -->
<reference id="migrating-to-4.2">

  <title>Migrating to release 4.2</title>
  <titlealts>
    <navtitle>To 4.2</navtitle>
  </titlealts>

  <shortdesc>DITA-OT 4.2 <ph id="summary">uses map-first pre-processing for HTML5 output and includes a new local
      configuration file, better CLI messages with support for overrides, a new version of the Lightweight DITA plug-in
      with enhancements to Markdown processing, and updates for the latest DITA 2.0 draft standard.</ph></shortdesc>

  <prolog>
    <metadata>
      <keywords>
        <indexterm>filters
          <indexterm>map-first pre-processing</indexterm></indexterm>
        <indexterm>map-first pre-processing</indexterm>
        <indexterm>pre-processing
          <indexterm>map first</indexterm></indexterm>
        <indexterm>pipelines
          <indexterm>map first</indexterm></indexterm>
      </keywords>
    </metadata>
  </prolog>

  <refbody>
    <section>
      <note>This topic provides a summary of changes in DITA-OT 4.2 that may require modifications to custom stylesheets
        or plug-ins. For more information on changes in this release, see the
        <xref keyref="4.2-release-notes"/>.</note>
    </section>

    <section id="4.2-css">
      <title>Common CSS changes</title>
      <indexterm><codeph>note__body</codeph> class</indexterm>
      <indexterm><codeph>cellrowborder</codeph> class</indexterm>
      <indexterm><codeph>row-nocellborder</codeph> class</indexterm>
      <indexterm><codeph>cell-norowborder</codeph> class</indexterm>
      <indexterm><codeph>nocellnorowborder</codeph> class</indexterm>
      <indexterm><codeph>firstcol</codeph> class</indexterm>
      <p>DITA-OT 4.2 includes several changes to the cascading style sheets generated by the HTML5 plug-in.</p>
      <ul>
        <li id="3955">HTML5 processing for <xmlelement>note</xmlelement> elements now wraps the note body in a
            <xmlelement>div</xmlelement> element with the <codeph>note__body</codeph> class, allowing it to be styled
          separately from the note title. For backwards compatibility, the common CSS files have been updated to display
          the note body inline with the note title to avoid a new line break before the content division element.
          <xref href="https://github.com/dita-ot/dita-ot/issues/3955" format="html" scope="external">#3955</xref>
        </li>
        <li id="4298">The DITA standard defines a <xmlatt>compact</xmlatt> attribute for list elements. Previously, this
          attribute was published to XHTML and HTML5 as an HTML <xmlatt>compact</xmlatt> attribute. However, the
            <xmlatt>compact</xmlatt> attribute was deprecated in HTML4 (over 20 years ago). Now, DITA
            <xmlatt>compact</xmlatt> attributes are published to XHTML and HTML5 as <xmlatt>class="compact"</xmlatt>
          keywords. New rules with the class selectors have been added to the default CSS files. Rules with the legacy
            <xmlatt>compact</xmlatt> list attributes have been marked as deprecated with Sass <xmlatt>warn</xmlatt>
          rules and will be removed from a future version of DITA-OT. Any custom CSS rules referencing the
            <xmlatt>compact</xmlatt> attribute should be updated.
          <xref href="https://github.com/dita-ot/dita-ot/issues/4298" format="html" scope="external">#4298</xref>,
          <xref href="https://github.com/dita-ot/dita-ot/issues/4303" format="html" scope="external">#4303</xref>,
          <xref href="https://github.com/dita-ot/dita-ot/issues/4358" format="html" scope="external">#4358</xref>
        </li>
        <li id="4364">Legacy table presentation classes that were deprecated in DITA-OT 2.3 have now been removed from
          the common CSS files.
          <xref href="https://github.com/dita-ot/dita-ot/issues/4364" format="html" scope="external">#4364</xref>
          <ul>
            <li><codeph>cellrowborder</codeph></li>
            <li><codeph>row-nocellborder</codeph></li>
            <li><codeph>cell-norowborder</codeph></li>
            <li><codeph>nocellnorowborder</codeph></li>
            <li><codeph>firstcol</codeph></li>
          </ul>
        </li>
      </ul>
      <note type="attention">In publishing environments that do not use the default CSS files — or those that include
        HTML generated by older versions of DITA-OT — these styles may need to be implemented in custom
        stylesheets.</note>
    </section>

    <section conkeyref="reusable-components/use-xslt3"/>

    <section id="map-first">
      <title>Map-first pre-processing</title>
      <p><ph conkeyref="map-first-preproc/map-first-preproc-desc"/></p>
      <p conkeyref="reusable-components/no-internal-preprocess2-ext"/>
      <note type="tip">See
        <xref
          keyref="map-first-preproc"
        /> for information on how to use (or test) map-first pre-processing, or revert to
        the legacy <codeph>preprocess</codeph> target.</note>
    </section>

  </refbody>
</reference>
